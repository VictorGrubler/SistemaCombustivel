<!-- abastecida.html -->

{% extends "base.html" %}

{% block content %}

<div class="main-content">
    <h2>Marcar Abastecimento</h2>

<!-- Toast de mensagem -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="toast {{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}


    <form class="formulario" method="POST" action="/abastecida">
        <label for="litros">Quantidade de Litros</label>
        <input type="number" step="0.01" id="litros" name="litros" required>

        <label for="valor">Valor Total (R$)</label>
        <input type="number" step="0.01" id="valor_total" name="valor_total" required>
        
        <label for="quilometragem">Quilometragem Atual</label>
        <input type="number" step="0.01" id="quilometragem" name="quilometragem" required>

        <label for="veiculo">Selecionar Ve√≠culo</label>
        <select id="veiculo" name="veiculo" required>
        <option value="">-- Selecione --</option>
        {% for v in veiculos %}
        <option value="{{ v.id }}">{{ v.nome }} - {{ v.placa }}</option>
        {% endfor %}
        </select>

        <label for="data">Data do Abastecimento</label>
        <input type="date" id="data_abastecimento" name="data_abastecimento" required>

        <button type="submit">Registrar</button>
    </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
      const toasts = document.querySelectorAll(".toast");
      toasts.forEach(toast => {
          setTimeout(() => {
              toast.style.opacity = '0';
              setTimeout(() => toast.remove(), 500);
          }, 3000); // tempo em ms antes de desaparecer
      });
  });
</script>
{% endblock %}
